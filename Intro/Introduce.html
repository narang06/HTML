<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>자기소개 - 이민형</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button id="darkModeToggle">🌙 다크 모드</button>

    <header class="profile-header">
        <div class="image-container">
            <img src="../Media/cat.jpg" id="main-profile-image" class="profile-img">
            <div class="hover-image">
                <img src="../Media/java.jpg" class="sub-profile-img" onclick="fnChange(this)">
                <img src="../Media/java2.jpg" class="sub-profile-img" onclick="fnChange(this)">
                <img src="../Media/java3.jpg" class="sub-profile-img" onclick="fnChange(this)">
            </div>
        </div>
        <h1>이민형</h1>
        <p class="currentTime">현재 시간:</p>
    </header>

    <div class="main-container">
        <div class="contents-change">
            <main class="main-content">
                <section class="about-me">
                    <h2>자기소개</h2>
                    <p>안녕하세요, 이민형입니다. 웹 개발에 관심이 많으며 HTML, CSS, JavaScript를 활용한 다양한 프로젝트를 배우고 있습니다.</p>
                </section>

                <section class="skills">
                    <h2>보유 기술</h2>
                    <ul>
                        <li><strong>프로그래밍 언어:</strong> HTML, CSS, JavaScript</li>
                        <li><strong>프레임워크:</strong></li>
                        <li><strong>데이터베이스:</strong> Oracle</li>
                    </ul>
                </section>

                <section class="contact">
                    <h2>연락처</h2>
                    <p>
                        이메일: <a href="mailto:sinso5281532@gmail.com">sinso5281532@gmail.com</a><br>
                        GitHub: <a href="https://github.com/narang06">github.com/narang06</a>
                    </p>
                </section>
            </main>

            <aside class="side-content1">
                <h3>HTML 갤러리</h3>
                <!-- 트리 폴더 구조 -->
                <div class="gallery" id="gallery"></div>

                <!-- 미리보기 / 코드보기 탭 -->
                <div id="output" style="margin-top: 1em;">
                    <div class="tabs">
                        <button class="tab-btn active" onclick="showTab('preview')">👁 미리보기</button>
                        <button class="tab-btn" onclick="showTab('code')">💻 코드보기</button>
                    </div>
                    <div id="preview" class="tab-content active">
                        <iframe id="preview-frame" style="width:100%; height:400px; border:1px solid #ccc;"></iframe>
                    </div>
                    <pre id="code" class="tab-content" style="background:#111; color:#eee; padding:1em; max-height:400px; overflow:auto;"></pre>
                </div>
            </aside>        

            <aside class="side-content2">
                <h3>기술 스택</h3>
                <p>추후 기능 구현 예정</p>
            </aside>

            <aside class="side-content3">
                <h3>활동 및 수상 경력</h3>
                <p>추후 기능 구현 예정</p>
            </aside>
        </div>
    </div>

    <footer class="site-footer">
        <p>&copy; 2025 이민형. All rights reserved.</p>
    </footer>
</body>
</html>
<script>
    // 메인 이미지 교체
    function fnChange(clickedImg) {
        let mainImg = document.querySelector("#main-profile-image");
        let temp = mainImg.src;
        mainImg.src = clickedImg.src;
        clickedImg.src = temp;
    }

    // 현재 시간 표시
    setInterval(() => {
        let now = new Date();
        let time = now.getHours().toString().padStart(2,'0') + ':' +
            now.getMinutes().toString().padStart(2,'0') + ':' +
            now.getSeconds().toString().padStart(2,'0');
        document.querySelector('.currentTime').textContent = '현재 시간: ' + time;
    }, 1000);

    // 컨텐츠 바깥 클릭 시 페이지 전환
    let wrapper = document.querySelector('.contents-change');
    let totalPages = 4;
    let currentPage = 0;

    document.body.addEventListener('click', (e) => {
        if (e.target.closest('#darkModeToggle')) return;
        if (e.target.closest('.main-container') || e.target.closest('.profile-header') || e.target.closest('.site-footer')) return;

        let windowWidth = window.innerWidth;
        let clickX = e.clientX;

        if (clickX > windowWidth / 2) {
            currentPage = (currentPage + 1) % totalPages;
        } else {
            currentPage = (currentPage - 1 + totalPages) % totalPages;
        }
        wrapper.style.transform = `translateX(-${currentPage*25}%)`;
    });

    // 서브 이미지 토글
    let mainImg = document.getElementById('main-profile-image');
    let hoverImages = document.querySelector('.hover-image');

    mainImg.addEventListener('click', (e) => {
        hoverImages.classList.toggle('show');
        e.stopPropagation();
    });

    document.body.addEventListener('click', (e) => {
        if (!e.target.closest('#main-profile-image') && !e.target.closest('.hover-image')) {
            hoverImages.classList.remove('show');
        }
    });

    // 다크 모드
    let toggleBtn = document.getElementById('darkModeToggle');
    toggleBtn.addEventListener('click', (e) => {
        document.body.classList.toggle('dark-mode');
        toggleBtn.textContent = document.body.classList.contains('dark-mode') ? "☀️ 라이트 모드" : "🌙 다크 모드";
        e.stopPropagation();
    });

    // === GitHub Repo 연결 부분 ===
    let repoOwner = "narang06";
    let repoName = "HTML";
    let branch = "main";

    async function fetchRepoContents(path = "") {
        let url = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${path}`;
        let res = await fetch(url);
        return await res.json();
    }

    async function renderFolder(path = "", container) {
        let items = await fetchRepoContents(path);
        let ul = document.createElement("ul");

        for (let item of items) {
            let li = document.createElement("li");

            if (item.type === "dir") {
                li.innerHTML = `📂 <span class="folder">${item.name}</span>`;
                li.querySelector(".folder").addEventListener("click", () => {
                    if (!li.querySelector("ul")) {
                        renderFolder(item.path, li);
                    } else {
                        li.querySelector("ul").remove();
                    }
                });
            } else if (item.type === "file" && /\.(html|css|js)$/.test(item.name)) {
                li.innerHTML = `📄 ${item.name} 
                <button onclick="showPreview('${item.path}')">👁</button>
                <button onclick="showCode('${item.path}')">💻</button>`;
            }
            ul.appendChild(li);
        }
        container.appendChild(ul);
    }

    function showTab(tab) {
        document.querySelectorAll(".tab-btn").forEach(btn => btn.classList.remove("active"));
        document.querySelectorAll(".tab-content").forEach(div => div.classList.remove("active"));

        document.querySelector(`.tab-btn[onclick*="${tab}"]`).classList.add("active");
        document.getElementById(tab).classList.add("active");
    }

    function showPreview(filePath) {
        const url = `https://${repoOwner}.github.io/${repoName}/${filePath}`;
        document.getElementById("preview-frame").src = url;
        showTab("preview");
    }

    async function showCode(filePath) {
        const url = `https://raw.githubusercontent.com/${repoOwner}/${repoName}/${branch}/${filePath}`;
        const res = await fetch(url);
        const text = await res.text();
        document.getElementById("code").textContent = text;
        showTab("code");
    }

    // 시작하자마자 실행
    renderFolder("", document.getElementById("gallery"));   
</script>




